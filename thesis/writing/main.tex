\documentclass[oneside]{book}

\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{3}

\usepackage[toc,page]{appendix}
\usepackage{minted}
\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{amsmath} % Required for some math elements 
\usepackage{pdflscape}
\usepackage{pdfpages}
\usepackage{float}
\usepackage{subcaption}
\usepackage{verbatim}
\usepackage{epigraph}
\usepackage{titlesec}

\newminted[HaskellCode]{haskell}{fontsize=\footnotesize}

\makeatletter
\titleformat{\part}[display]
  {\Huge\scshape\filright}
  {\partname~\thepart:}
  {20pt}
  {\thispagestyle{epigraph}}
\makeatother
\setlength\epigraphwidth{.6\textwidth}

\begin{document}

\begin{titlepage}
	\centering
	\includegraphics[width=0.60\textwidth]{./logo/UoN_Primary_Logo_RGB.png}\par\vspace{1cm}
	{\scshape\Large PhD Thesis\par}
	\vspace{1.5cm}
	%{\huge\bfseries Foundations Of Pure Functional \\ Agent-Based Simulation \par}
%	{\huge\bfseries Pure Functional Programming \\ In Agent-Based Simulation \par}
	{\huge\bfseries The Pure Functional Programming Paradigm \\ In Agent-Based Simulation \par}
	\vspace{2cm}
	{\Large Jonathan Thaler (4276122) \\ \itshape jonathan.thaler@nottingham.ac.uk \par}
	\vfill
	supervised by\par
	Dr. Peer-Olaf \textsc{Siebers} \\
	Dr. Thorsten \textsc{Altenkirch}

	\vfill

	{\large \today\par}
\end{titlepage}

\cleardoublepage

\section*{Abstract}
This thesis shows how to implement Agent-Based Simulations (ABS) using the \textit{pure} functional programming paradigm and what the benefits and drawbacks are when doing so. As language of choice, Haskell is used due to its modern nature, increasing use in real-world applications and \textit{pure} nature. The thesis presents various implementation techniques to ABS and then discusses concurrency and parallelism and verification and validation in ABS in a pure functional setting. Additionally the thesis briefly discusses the use of dependent types in ABS, to close the gap between specification and implementation - something the presented implementation techniques don't focus on.
Finally a case-study is presented which tries to bring together the insights of the previous chapters by replicating an agent-based model both in pure and dependently typed functional programming. The agent-based model which was selected was much discussed in ABS communities as it claimed to have solved a fundamental problem of economics but it was then found that the implementation had a number of bugs which shed doubt on the validity and correctness of the results. The thesis' case study investigates whether this failure could have happened in pure and dependent functional programming and is a further test to see of how much value functional programming is to ABS. \\


TODO "first draft" milestone until June 2019
\begin{enumerate}
	\item finish parallel ABS chapter: finish parallelism, write concurrency chapter but different story: don't focus on comparison to IO lock based but the main punch line is: "we can do concurrency with still static guarantees about side-effects which guarantee that they are ONLY due to concurrency and nothing else: STM" - a very convenient side-effect is that our STM approach is much faster than the IO based in SIR and in sugarscape. leave indexed Array of IORefs for further research
	
	\item Write property-based testing chapter with same narrative like in the summer sim paper but with much more technical detail
	
	\item Agent-Interaction Property-Based testing using quickcheck-state-machine and \cite{de_vries_-depth_2019} \url{http://www.well-typed.com/blog/2019/01/qsm-in-depth/}
	
	\item Even-driven SIR testing?
	
	\item Write all chapters of discussion part	
	
	\item Write a first draft of conclusions	
	
	\item Read full first draft twice and refine it
\end{enumerate}

TODO "filling in holes" milestone until August 2019
\begin{enumerate}
	\item Do work left over from "first draft" milestone
	
	\item Reading: Ionescu thesis, Ted Kaminski thesis, other papers not read yet
	
	\item Generalising ABS: extract the foundational properties: agents as monad / comonad / arrow and discuss their implications from an abstract point of view

	\item Read full first draft twice and refine it
	
	\item optional: implement Gintis Case-Study with Haskell
	
	\item optional:  implement Gintis Case-Study with Idris if time (problably there wont be)
\end{enumerate}

TODO "cleaning up / polishing" milestone until September 2019
\begin{enumerate}
	\item proof reading

	\item refining expressions
	
	\item reconcile all code into thesis code folder?
	
	\item extract all references of the thesis in separate file and manually fine-tune them so that they are perfect: including DOI, include link to webpage in case of a blog,...
\end{enumerate}

TODO prepare for viva:
\begin{enumerate}
	\item read transformers chapters
	
	\item read exception chapter

	\item read basic libraries chapter	
	
	\item completely understand monad-transformers: what is executed in which order? what about commutativity? e.g. STM is innermost monad, will be evaluated last to get an IO but this in fact leads then to the evaluation of all the monads before because STM is able to re-run
\end{enumerate}

%TODO: from the 2nd annual review i got the feedback that i need to come up with a more coherent thesis structure which tells a story: i need to make myself clear what story i want to tell with my phd and what research and publications i still need to do for that (identify chapters and to which extent they are already finished). Also I need to come up with a precise publication plan, focusing on writing papers early than doing research for a too long time and starting an early thesis writing. This is because any unpublished research is lost and every published research is a contribution to knowledge. "A good PhD is asking more questions than it answers."

\clearpage
\tableofcontents
\clearpage
\textit{To my parents for their unconditional love and support throughout all my life.}
\clearpage

\input{./tex/acknowledgements.tex}

% PART I: Beginnings
\epigraphhead[450]{}
\part{Beginnings}

\input{./tex/introduction.tex}

\input{./tex/literature.tex}

\input{./tex/methodology.tex}

\input{./tex/implAbs.tex}

% PART II: How
\epigraphhead[450]{}
\part{How: Towards pure functional ABS}
\input{./tex/timedriven.tex}

\input{./tex/eventdriven.tex}

% PART III: Intermission
\epigraphhead[450]{}
\part{Intermission}
\input{./tex/generalising.tex}

% PART IV: Why
\epigraphhead[450]{}
\part{Why: Reaping the benefits}
\input{./tex/parallelabs.tex}

\input{./tex/property.tex}

% PART V: Discussion
\epigraphhead[450]{}
\part{Discussion}
\input{./tex/discussion.tex}

% PART VI: Conclusions
\epigraphhead[450]{}
\part{Conclusion}
\input{./tex/conclusions.tex}

\renewcommand\bibname{References}

\bibliographystyle{acm}
\bibliography{../../writing/references/phdReferences}

\input{./tex/appendix.tex}

\end{document}
