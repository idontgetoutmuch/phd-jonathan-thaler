\section{Discussion}
implementing agent-interactions in a concurrent implementation with STM. we have started to do work on this already and could implement also async agent-interactions as they occur in the disease transmission, payback of loans and notification of inheritance upon the death of a parent agent. We use the \textit{TQueue} primitive to emulate the behaviour of mail-boxes through which agents can post events to each other which they need to process during the same time-step. The result is promising but needs further investigation. We have also started looking into synchronous agent-interactions using STM which is a lot trickier and is very susceptible to dead-locks (which are still possible in STM!).
Marlow Book: "In general, the class of operations that STM cannot express are those that involve multi-way communication between threads. The simplest example is a synchronous channel, in which both the reader and the writer must be present simultaneously for the operation to go ahead. We cannot implement this in STM, at least compositionally, for the same reason that we cannot implement TMVar with fairness: the operations need to block and have a visible effect—advertise that there is a blocked thread—simultaneously."


further research: the approach of executing dependent functions in different layers \url{https://academic.oup.com/bib/article/11/3/334/225993} might allow even further speed-up, also the same paper: "Mobile discrete simulations consisting of agents navigating a grid like environment are less well-suited to a GPU implementation as they are traditionally implemented in sequential environments. Parallel implementations of discrete mobile systems on the GPU must explicitly handle collision conditions which result from agents simultaneously moving to the same discrete location."

TODO: we don't look into distributed functional abs as it is completely beyond the scope of this thesis.
