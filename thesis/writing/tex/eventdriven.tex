\chapter{Pure Functional Event-Driven ABS}
\label{ch:eventdriven}

In this chapter we build on the previous discussion of update-strategies in Chapter \ref{ch:impl_abs} and the implementation techniques presented in the time-driven approach of Chapter \ref{ch:timedriven} to develop concepts for event-driven ABS in a pure functional way. 

In event-driven ABS \cite{meyer_event-driven_2014}, the simulation is advanced through events: agents and the environment schedule events into the future and react to incoming events scheduled by themselves, other agents, the environment or the simulation kernel. Time is discrete in this approach: it advances step-wise from event to event, where each event has an associated time-stamp, which indicates the virtual simulation time when it is scheduled. This implies that time could stay constant e.g. when an event is scheduled with a time-delay of 0 the virtual simulation time does not advance. Because agents can adopt and change their state and behaviour when processing an event, this means that even if time does not advance, agents can change. This non-signal behaviour is the fundamental difference to the time-driven approach in Chapter \ref{ch:timedriven}. Further, we exploit this mechanism to implement direct agent-interactions in pure functional ABS as discussed in the Sugarscape use-case below.

The event-driven approach makes the simulation kernel technically closely related to a Discrete Event Simulation (DES) \cite{zeigler_theory_2000}. Due to the necessity of imposing a correct ordering of events in this type of ABS, we need to step it event by event, with the \textit{sequential} update-strategy being the only feasible one for this type of ABS. Note that there exists also Parallel DES (PDES) \cite{fujimoto_parallel_1990}, which processes events in parallel and deals with inconsistencies by reverting to consistent states - we hypothesize that a pure functional approach could be beneficial in such an approach due to persistent data-structures and explicit handling of side-effects but we leave this for further research.

We use the Sugarscape model to develop pure functional concepts for event-driven ABS \footnote{The code of all steps can be accessed freely from: \url{https://github.com/thalerjonathan/phd/tree/master/public/towards/SugarScape/sequential}}. We chose this model for the following reasons: it is quite well known in the ABS community; it was highly influential in sparking the interest in ABS; it is quite complex with non-trivial agent-interactions; the original implementation was done in Object Pascal and C with about 20.000 lines of code which includes GUI, graphs and plotting, where they used Object Pascal for programming the agents and C for low-level graphics \cite{axtell_aligning_1996}; the authors explicitly advocate OOP as a good fit to ABS which begged the question whether and how well a pure functional implementation is possible. The Sugarscape model is not a classic event-driven model: in it the agents do schedule events but they don't do this into the future - events in Sugarscape don't have associated time-stamps. Still the underlying concepts are the same as in event-driven ABS and it is trivial to add time-stamps as we will show in an additional section where we implement an event-driven implementation of the previously introduced agent-based SIR model, moving towards a real event-driven ABS with DES character.

\input{./tex/eventdriven/implementation.tex}

\input{./tex/eventdriven/eventdrivenSir.tex}

\input{./tex/eventdriven/discussion.tex}